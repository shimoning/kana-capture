{"version":3,"file":"diff.js","sources":["../../../src/utilities/diff.ts"],"sourcesContent":["/**\n * 文字列比較を行う関数\n *\n * あくまでこのライブラリのためだけに作成したものなので汎用性はない\n */\nexport type DiffResult = {\n  before: string;\n  after: string;\n  diff: string;\n  same: string;\n  gap: number;\n}\n\nexport function diff(beforeString: string, afterString: string): DiffResult\n{\n  if (!beforeString.length || !afterString.length) {\n    return {\n      before: beforeString,\n      after: afterString,\n      diff: afterString,\n      same: '',\n      gap: 0,\n    }\n  }\n  if (beforeString === afterString) {\n    return {\n      before: beforeString,\n      after: afterString,\n      diff: '',\n      same: beforeString,\n      gap: 0,\n    }\n  }\n\n  const beforeCharacters = beforeString.split('')\n  const afterCharacters = afterString.split('')\n  const length = Math.max(beforeCharacters.length, afterCharacters.length)\n  const sameCharacters = []\n  const diffCharacters = []\n  let gap = 0\n  for (let i = 0; i < length; i++) {\n    const beforeCharacter = beforeCharacters[i]\n    for (let j = i + gap; j < length; j++, gap++) {\n      const afterCharacter = afterCharacters[j]\n      if (beforeCharacter === afterCharacter) {\n        sameCharacters.push(beforeCharacter)\n        break\n      }\n      diffCharacters.push(afterCharacter)\n    }\n  }\n\n  return {\n    before: beforeString,\n    after: afterString,\n    diff: diffCharacters.join(''),\n    same: sameCharacters.join(''),\n    gap,\n  }\n}\n"],"names":["diff","beforeString","afterString","beforeCharacters","afterCharacters","length","sameCharacters","diffCharacters","gap","i","beforeCharacter","j","afterCharacter"],"mappings":"gFAagB,SAAAA,EAAKC,EAAsBC,EAC3C,CACE,GAAI,CAACD,EAAa,QAAU,CAACC,EAAY,OAChC,MAAA,CACL,OAAQD,EACR,MAAOC,EACP,KAAMA,EACN,KAAM,GACN,IAAK,CACP,EAEF,GAAID,IAAiBC,EACZ,MAAA,CACL,OAAQD,EACR,MAAOC,EACP,KAAM,GACN,KAAMD,EACN,IAAK,CACP,EAGI,MAAAE,EAAmBF,EAAa,MAAM,EAAE,EACxCG,EAAkBF,EAAY,MAAM,EAAE,EACtCG,EAAS,KAAK,IAAIF,EAAiB,OAAQC,EAAgB,MAAM,EACjEE,EAAiB,CAAC,EAClBC,EAAiB,CAAC,EACxB,IAAIC,EAAM,EACV,QAASC,EAAI,EAAGA,EAAIJ,EAAQI,IAAK,CACzB,MAAAC,EAAkBP,EAAiBM,CAAC,EAC1C,QAASE,EAAIF,EAAID,EAAKG,EAAIN,EAAQM,IAAKH,IAAO,CACtC,MAAAI,EAAiBR,EAAgBO,CAAC,EACxC,GAAID,IAAoBE,EAAgB,CACtCN,EAAe,KAAKI,CAAe,EACnC,KAAA,CAEFH,EAAe,KAAKK,CAAc,CAAA,CACpC,CAGK,MAAA,CACL,OAAQX,EACR,MAAOC,EACP,KAAMK,EAAe,KAAK,EAAE,EAC5B,KAAMD,EAAe,KAAK,EAAE,EAC5B,IAAAE,CACF,CACF"}